<html><head>
<meta http-equiv="content-type" content="text/html; charset=GB2312">

<title>Shift1 System for 1-wire Shift Registers</title> 
<meta name="description" content="Roman Black's Shift1 System for Shift Registers">
<meta name="keywords" content="PIC, Shift1, Shift1-LCD, Shift Register,
1-wire shift register, Shift1 System, Shift1 Protocol">

<!-- ---------------------------------------------------------------------->
</head><body alink="#cc0000" bgcolor="#000000" vlink="#aa40aa" text="#cccccc" link="#6060ff">

<font face="Arial,Helvetica,Verdana,Geneva,sans-serif">
<font size="-1"> <!-- default font-->
<!-- ---------------------------------------------------------------------->
<font size="2">
<a href="http://www.romanblack.com/index.htm#elec">[Back to Home Page]</a></font>
<br>
<br>

<!-- ---------------------------------------------------------------------->
<font color="#ccaa66" size="+1"><b>www.RomanBlack.com</b></font>
<br>
<br>


<!-- ---------------------------------------------------------------------->
<font color="#ccaa66" size="+2"><b>Shift1 system for 1-wire shift registers</b></font><br>
<b>Using a shift register to get 7 or 8 output pins from 1 PIC pin!</b>
- 3rd Nov 2009.
<br>
<br>
<br>

<!-- ---------------------------------------------------------------------->
<!-- ---------------------------------------------------------------------->
<!-- ---------------------------------------------------------------------->


<!-- ---------------------------------------------------------------------->
<font color="#ccaa66" size="+1"><b>What is it?</b></font>
<!-- ---------------------------------------------------------------------->
<br>
<br>

My <b>Shift1 System</b> is a cheap and simple way to get lots of digital
output pins and only needs 1 PIC pin to drive it.
<br>
<br>

You can often buy CMOS Shift Register ICs very cheap, and this can be
a great way to get more output pins from your PIC. But to drive a shift
register generally needs 2 or 3 control pins... My system on this page
only needs ONE PIC pin!
<br>
<br>

I should state that <b>I did not invent the idea of controlling a
shift register with one RC network!</b> This is an old idea I have seen
many years ago. What I wanted to do here was develop a system to work
with LATCHED shift registers (ie I created a system that uses 2 RC networks
and 3 shift register pins) and also I wanted to produce a ready-made
workable system with C source code etc so people can easily make use of it.
<br>
<br>
<br>


<!-- ---------------------------------------------------------------------->
<font color="#ccaa66" size="+1"><b>How it works - the simple system</b></font>
<!-- ---------------------------------------------------------------------->
<br>
<br>

<b>Normally, serial-in parallel-out shift register ICs can be set up for 2
pin operation;</b>
<li> DAT - data, is the next bit to be shifted in
</li><li> CLK - clock pulse, on / edge the next bit is shifted in
<br>
<br>

This can be "cheated" to just use one pin and timed-length pulse.
An RC network is used to provide a time delay for the DAT line to change.
Very short pulses mean that a 1 bit is shifted in. With a long enough
pulse the DAT voltage drops low enough so that a 0 bit is shifted in
when the CLK line goes / again.
<br>
<br>
<br>


<img src="shift1_files/shift1.gif">
<br>
<br>
<br>


The system above works pretty good, all that is required is a Resistor
and Capacitor, and then the pulse length detemines if each new bit
is shifted in as a 1 or 0.
<br>
<br>


The only drawback is that the data on the 8 parallel outputs changes
as the new bits are shifted in. For many applications this doesn't matter,
as it happens very quickly, generally less than a millisecond to shift 
all 8 bits in. So it can be used for things like LEDs, LED matrixing
and keyboard matrixing etc.
<br>
<br>
<br>

<!-- ---------------------------------------------------------------------->
<font color="#ccaa66" size="+1"><b>Shift1 LATCHED system for driving LCDs</b></font>
<!-- ---------------------------------------------------------------------->
<br>
<br>

One of the things I wanted to use the Shift1 System for was driving a
text LCD from 1 PIC pin. This is a very useful thing for me as I have
lots of cheap shift register ICs and can then add a LCD to any PIC
project that has ONE spare pin.
<br>
<br>

To drive a text LCD needs 6 pins; 4 data, RS and E. The E pin must be
treated carefully so the basic Shift1 system shown above won't work.
It needs a LATCHED system where the shift register's parallel outputs
don't change until the register is "latched".
<br>
<br>
<br>

<img src="shift1_files/shift1b.gif">
<br>
<br>
<br>

The Shift1 latched system is just an extension of the same concept.
So 7 bits are sent first, then the 8th pulse is very long which
triggers the latch event. I specifically designed this for the 74HC595
shift register IC which is common, cheap and has 20mA output drivers.
<br>
<br>

One obvious problem is that the last bit shifted in (bit0) will always be
a zero. I though this was an acceptable tradeoff for such a neat system
as to drive a text LCD only needs 6 bits, and it gives 7 bits.
<br>
<br>

A less obvious problem is that it is a little slow. Driving an LCD
needs the latch data to be sent 4 times for each text character sent.
Twice for the 4bit data, and twice to make the additional E pulses.
This can take up to 4mS to send a character (usually around 3mS).
It is fast enough for most display purposes and menus etc, unless
you need to display a LOT of fast-changing numerical data.

<br>
<br>
<br>

<!-- ---------------------------------------------------------------------->
<font color="#ccaa66" size="+1"><b>Testing my Shift1 Latched protocol</b></font>
<!-- ---------------------------------------------------------------------->
<br>
<br>
<br>

<img src="shift1_files/sh74595.jpg">
<br>
<br>
<br>

<b>The "proof of concept" worked perfectly first go.</b> I only had the 74HC595
in surface mount size, so I used a SO16 adapter board into a DIP16 socket. 
<br>
<br>

<b>The RC filter values</b> are the same as shown in the schematic below;<br>
1k5 &nbsp; 2.2nF<br>
33k &nbsp; 2.2nF<br>
<br>
<br>

<img src="shift1_files/shift1c.gif">
<br>
<br>
<br>

These values were chosen to give good comms speed, ie the shortest low
pulse is 1uS which is a good value for PICs. The 1:20 ratio of the
resistors was chosen to give a good safety margin between the low
period needed to shift a low bit, and the low period needed to cause a
latch command. I tested the shift register 8 output pins with a 8 bar
LED. All 7 shift register pins worked perfectly, as expected.
<br>
<br>

<b>I tested all the period times on the oscilloscope, and ended up with
the uS periods shown in the diagram above.</b> They have a safety margin
built in, you may be able to use shorter periods.


<br>
<br>
<br>

<img src="shift1_files/sh74595lcd.jpg">


<br>
<br>
<br>

<b>The next test was to hook up a text LCD...</b> I connected 6 of the
74HC595 pins to a typical LCD and added a 10k contrast pot. Then I
adapted my C LCD code to write to the 6 pins through my Shift1 timed
protocol. Everything worked fine, and was tested on a few different
LCD displays. It's a success, one PIC pin driving a whole LCD and all
that's needed is a shift register and a few discretes.

<br>
<br>
<br>

<!-- ---------------------------------------------------------------------->
<hr><br>
<font color="#ccaa66" size="+1"><b>A practical Shift1 LCD driver</b></font>
<!-- ---------------------------------------------------------------------->
<br>
<br>

I designed a small PCB for using the Shift1 system to drive a text LCD.
This only needs a 74HC595 shift register IC, 2 resistors and 2 caps, and
a contrast trimpot to drive an LCD from 1 PIC pin.
<br>
<br>

The PCB mounts directly behind the LCD display, on the 16pin LCD header.
<br>
<br>
<br>

<img src="shift1_files/shift1sch.gif">
<br>
<br>
<br>

I also added space on the Shift1-LCD to include an optional 8pin PIC.
As it only needs 1 pin to drive the LCD that still allows many simple
applications with a little PIC. Another addition was a P-FET to control
the LCD backlight (if it has one). This is done using the spare bit,
so now all 7 outputs of the shift register are used and the PIC can
turn the backlight on/off without needing any more pins.


<br>
<br>
<br>

<img src="shift1_files/Shift1_pcb.gif">

<br>
<br>
<br>



<b>The Shift1-LCD module is available as a low cost kit in 2 forms;</b>
 
 </li><li> Standard; Kit without PIC microcontroller
 
 </li><li> PIC Option; Kit also contains PIC 12F675, 8pin socket, 8MHz xtal and caps


<br>
<br>
<br>

<img src="shift1_files/sh1_simple.jpg">
<br>
<br>
<br>

<b>This is the standard SHift1-LCD kit.</b>
As you can see above the Shift1 can be a complete LCD driver that
only requires +5v, ground and ONE signal wire from any external PIC
or other micro. 
<br>
<br>

<img src="shift1_files/sh1_plugged.jpg">
<br>
<br>
<br>

All Shift1-LCD kits now come with 16pin header and 16pin socket, so it
can plug direct onto the back of your LCD. A 10pin angled header
is also provided for the other connection.
<br>
<br>
<br>



<img src="shift1_files/sh1_pcbs.jpg">
<br>
<br>
<br>


All the Shift1-LCD kits come with <b>top quality PCBs</b> and are
very fast to assemble; about 15 minutes.

<br>
<br>
<br>


<!-- ---------------------------------------------------------------------->
<hr><br>
<font color="#ccaa66" size="+1"><b>Shift1-LCD with PIC option!</b></font>
<!-- ---------------------------------------------------------------------->
<br>
<br>
<br>

<img src="shift1_files/sh1_front.jpg">

<br>
<br>
<br>

<b>The PIC Option</b> is an add-on kit for the Shift1-LCD that has
a PIC 12F675 microcontroller (with 4 ADCs) a 8MHz xtal and caps
(for precise timing tasks) and an 8pin socket for the PIC.
<br>
<br>

<b>Now the Shift1-LCD can be a complete controller with LCD!</b>

</li><li> Clocks - Timers - Counters
</li><li> Frequency and RPM display
</li><li> Thermometers and Temperature controllers
</li><li> Power supply controllers
</li><li> Solar battery charge controllers
</li><li> Chronographs
</li><li> Alarm controllers
</li><li> PWM controllers
</li><li> Message displays
</li><li> (the list goes on!)

<br>
<br>
<br>


<img src="shift1_files/sh1_mounted.jpg">
<br>
<br>
<br>

<font size="+1">
</font></li><font size="+1"><li> Shift1-LCD standard kit $12 USD
</li><li> Shift1-LCD with PIC option $18 USD</li></font>
<br>
(You supply the LCD)
<br>
<br>

<font size="+1">
Buy Kits here! 
<a href="http://techref.massmind.org/techref/io/lcd/Shift1_assemble.htm" target="_blank"><b>Shift1-LCD Kits</b></a></font>
<br>
<br>

<font size="+2">
There are lots of Shift1-LCD
<a href="http://www.romanblack.com/shift1/sh1_projects.htm">Projects Here!</a>
</font>


<br>
<br>
<br>

<!-- ---------------------------------------------------------------------->
</font></font><hr><font face="Arial,Helvetica,Verdana,Geneva,sans-serif"><font size="-1"><br>
<!-- ---------------------------------------------------------------------->
 - end - 
<br>
<br>

<font size="2">
<a href="http://www.romanblack.com/index.htm#elec">[Back to Home Page]</a>
</font>

<br>
</font>
</font></body></html>