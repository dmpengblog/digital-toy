<html><head>
<meta http-equiv="content-type" content="text/html; charset=GB2312">

<title>Motor rotation speed sensing</title>
<meta name="description" content="encoder to sense motor speed with minimum parts">
<meta name="keywords" content="motor speed sensing, dc motor, motor speed control">
</head><body alink="#8f0000" bgcolor="#808080" vlink="#6f004f" text="#000000" link="#00008f">
<font face="Arial,Helvetica,Verdana,Geneva,sans-serif">
<font size="-1"> <!-- default font-->
<!-- ---------------------------------------------------------------------->
<font size="2">
<a href="http://www.romanblack.com/index.htm#elec">[Back to Home Page]</a></font>
<br>
<br>

<!-- ---------------------------------------------------------------------->
<font size="+2"><b>www.RomanBlack.com</b></font>
<br>
<br>

<!-- ---------------------------------------------------------------------->
<font color="#ffff00" size="+2"><b>DC Motor Speed Encoder </b></font><br>
<b>Very cheap simple system to measure DC motor speed.</b><br>
Roman Black - April 2001
<br>
<br>
<br>

<!-- ---------------------------------------------------------------------->
<!-- ---------------------------------------------------------------------->
<!-- ---------------------------------------------------------------------->

<!-- ---------------------------------------------------------------------->
<font color="#ffff00" size="+1"><b>What is it? </b></font>
<!-- ---------------------------------------------------------------------->
<br>
<br>
This is a one-transistor circuit that gives a <b>digital pulsed output</b>
which is <b>dependant on the speed of a small DC motor.</b>
This "speed" frequency signal can be fed to a PIC or other Micro which
can then measure motor speed and possibly control the motor speed.

<br>
<br>
<br>

<img src="DC-motor-encoder_files/encoder.gif">
<br>
<br>
<br>





<!-- ---------------------------------------------------------------------->
<font color="#ffff00" size="+1"><b>Theory </b></font>
<!-- ---------------------------------------------------------------------->
<br>
<br>
Small DC motors have a brass <b>commutator</b> which alternately connects
the windings (usually 3 windings) as the motor armature rotates.
<br>
<br>

As the brushes "commutate" across the joins in the commutator, the current
drawn by the motor <b>ripples</b> at a frequency that represents the motor
speed, at a set number of pulses per rotation.
<br>
<br>

This effect can be seen as a voltage ripple waveform on the CRO when the motor
is running. The ripple is more obvious, and more reliable, when the motor has
some load (like a fan etc). Adding a small resistor like 1 ohm or 10 ohms
before the motor makes this even more obvious.
<br>
<br>
<br>
 

<!-- ---------------------------------------------------------------------->
<font color="#ffff00" size="+1"><b>How it works </b></font>
<!-- ---------------------------------------------------------------------->
<br>
<br>

<b>The circuit is very simple;</b>
<li> Trimpot is adjusted so transistor is JUST OFF
</li><li> Ripple voltage is made by the commutator as the motor rotates
</li><li> Each ripple voltage pulse turns the transistor ON for a short pulse
</li><li> Transistor output is a digital output, frequency can be fed to a PIC input etc
<br>
<br>
<br>
 

<!-- ---------------------------------------------------------------------->
<font color="#ffff00" size="+1"><b>Limitations? </b></font>
<!-- ---------------------------------------------------------------------->
<br>
<br>

As the motor can sometimes produce spurious extra or missed pulses this
cheap circuit is NOT reliable for positioning accuracy or to measure how
many times a motor has rotated. It is NOT a replacement for a "proper" optical
encoder.
<br>
<br>

But it is <b>reasonably reliable to measure the motor speed</b> of a small DC motor
under moderate loads at a fairly constant speed.
<br>
<br>

<b>It is suitable for measuring/controlling;</b>
</li><li> A fan
</li><li> 12v water pump (will also detect zero water over-rev)
</li><li> Speed-controlled rotating device etc.
</li><li> Small DC motor handtools etc (no mechanical mods needed).
<br>
<br>
<br>
 

<!-- ---------------------------------------------------------------------->
<font color="#ffff00" size="+1"><b>Circuit Details </b></font>
<!-- ---------------------------------------------------------------------->
<br>
<br>


<b>Motor voltage ripple is needed</b> and about 50mV to 100mV peak to peak
ripple waveform is ideal.
<br>
<br>

<b>R1 (maybe 1 ohm) </b> is only needed if ripple voltage is less than
50mV under normal running conditions. Increasing R1 gives bigger ripple
and better speed sensing but reduces motor performance and wastes heat in R1.
<br>
<br>

<b>D1 (1N4148 or 1N914 glass diode)</b> is only needed for larger motors
(over 2 amps).
<br>
<br>

<b>C1 (about 1uF)</b> allows pulses to be fed to the transistor. 
<br>
<br>

<b>C2 (about 0.1uF to 1uF)</b> gives a smoothed ripple voltage at the
transistor base. Reducing C2 can increase the ripple voltage and improve
sensitivity but if too small it can also allow some noise and spurious
pulses to occur.
C1 and C2 perfect values depend on the motor size and speed.
<br>
<br>

<b>Q1 </b> is not a critital part, just about any small NPN transistor will
work.
<br>
<br>
<br>

<img src="DC-motor-encoder_files/encoder.gif">
<br>
<br>
<br>


<!-- ---------------------------------------------------------------------->
<font color="#ffff00" size="+1"><b>Tips for using it </b></font>
<!-- ---------------------------------------------------------------------->
<br>
<br>

You can <b>adjust the trimpot</b> safely when the motor is running and
find the "sweet spot" where speed sensing is most reliable.
<br>
<br>

If mounted a long distance from the motor, the main signal wire to C1
should be a COAX sheilded type cable. Grounds are not that critical, but
if using COAX only ground the sheilding at the end AWAY from the motor.
<br>
<br>

Use a CRO to measure the ripple waveform, about 50mV at the center pin
of the trimpot is ideal.
<br>
<br>

The output is best fed to a schmitt trigger type digital input pin of a PIC
or other micro. This provides extra "squaring" of the digital frequency
waveform. If you don't have a ST digital input pin (you only have the TTL type),
check that the circuit output is very square with full 5v-0v swing and fast
rise and fall times.
You can improve this by increasing the ripple voltage, by increasing R1
and/or reducing C2.
<br>
<br>

<b>Important!</b> The commutator does NOT produce evenly spaced pulses BUT it does
produce a set number of pulses per shaft rotation.
Speed measurement is best performed by <b>measuring the number of pulses over
a timed period</b> and not by measuing the time between 2 pulses!
<br>
<br>


Frequency averaging helps to reduce the effect of spurious pulses and noise,
for best accuracy have at least 50 pulses in the timed period or even more.
<br>
<br>



<!-- ---------------------------------------------------------------------->
<!-- ---------------------------------------------------------------------->
 - end - 
<br>
<br>

<font size="2">
<a href="http://www.romanblack.com/index.htm#elec">[Back to Home Page]</a>
</font>

<br>
</li></font>
</font></body></html>