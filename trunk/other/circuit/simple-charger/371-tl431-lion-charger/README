http://www.hellocq.net/forum/showthread.php?t=63951&page=7&pp=30


========================================================================================================
V1

最近买了些锂电池，尤其是没有保护板的，打算串并联成电池组。但锂电池骄气，担心万一过流短路，因此设计了一个简单的锂电池充电电路，借这里人气旺盛贴在此处，虽然题目上说“出售”，那只是靠题罢了，实际售价为0，无偿提出供讨论。

电路很简单，元件很容易廉价获得，适用范围很宽，可以适应1节－4节串连电压，充电电流可以通过元件参数选择，充电特性也比较理想，原理如下：

由LM317和R1、R2、R3组成一个典型的恒流电路（431暂时认为断开R4比较大可以先不看）。当电压不太高时保持恒定的充电电流。以两节电池充电为例，理想状态下，充电电流应该是电压达到8.3V前一直保持恒定。当A点电压达到拐点值8.3V时，经过R4、R5分压，TL431开始导通，并把 LM317的基准点电压从8.3V逐渐拉下。所谓拐点就是指电流开始下降的那点。直到电压达到8.4V的0电流点，A点仍然保持这个8.3V电压，LM317的输出Vout下降到8.4V，其调整端下降到7.17V。

电池电压为8.3V时（拐点）各点的电压都标在图上，充电截止（8.4V）的各点电压以括号形式也标在后边。


元件选择
LM317，三端可调串连稳压块，选塑封的，LM317T，常用。根据电流不同，应选用相应的散热片。
TL431，三端可调并联稳压块，与一个小三极管外形一样，常用。
RL就是外接被充电池。
电流采样电阻R1，计算方法是R1 = 1.23 / 充电电流。例如，若充电电流为0.3A，则电阻应该选择4.1欧。这个电阻一般要选择功率大一些的，比如1A就应该是2W的。

可调电阻R4可以选择那种篮色的精密多圈，取比额定值大一些的，比如23.2k的就可以选择25K的多圈。若嫌多圈太贵或难找，也可以用一个固定电阻串连一个普通可调电阻。例如23.2k的就可以选择22k固定加一个2.2k－3.9k可调节的，以便进行精细调节。

电阻R2的要求不是很高，可以采用串并联的方法得到。比如8.8欧可以选择10欧并联75欧（或并50欧－91欧）

若电路设计为适应不同的电压，比如可以转换完成2节、3节、4节电池的充电，那就应该分别选择可调电阻，并找一个2刀3掷波段开关，用来切换两个可调电阻。

若要求充电电流也可以变化，自然也可以使用波段开关来转换。
========================================================================================================

V3-81-floor
我又改了一下，调整了点参数，增加了充满指示。
去买了1x10开关，用于控制电流：3、2、1.5、1、0.7、0.5、0.3、0.2、0.15A
也买了2x4开关，控制电压：3.6、7.2、10.8、14.4V
打算用我的一个3A13.8V电源改制。
当然，调整管要改成LM338（5A的）。

电路特点：相对简单，容易理解，元件容易取得，功能完善，特性理想。
Vin是直流，整流稳压既可，但需要保证最小要比Vout还要高2V。
开始充电时，由于输出电压比较低，因此经过R4和R5分压后不足2.5V，因此TL431截止，可以认为R8和R9不存在，此时由LM317和R1组成恒流电路，即R1的电压为1.23V为恒定，R3电压可忽略。二极管D提供正向充电电流通路，尽管有压降，但由于是在电压采样之前，因此丝毫不影响电压的准确采样。
接上具有一定电压的电池RL后，Q3导通、因此Q2也导通，其压降可以忽略。
若充电到一多半时，双节电池电压达到8.3V（单节4.15V），R4/R5分压后达到2.5V（如图红色标志），则TL4321开始导通，把LM317 的参考地拉下，R3开始有电流通过并有压降，从而流过R1的电流减少，因此LM338退出恒流状态，整个电路转为恒压电路。
R9本来可以短路，其作用是当电流流过后产生一个压降，一方面使得LED发光，另一方面在电池没充满时基本不发光。R8的作用是限制LED的电流。
当电流减少到1/3初始值时，LED就开始导通发光，充电电流减少到接近0时发光最亮，指示充满。
异常时，
1、若停电或断电，则Q1截止，二极管D和Q1的集电结保证电池不会放电。正常充电时，R2给Q1提供电流，因此Q1短路。
2、若电池电压高出额定电压（比如接了个14.4V电池），同样D会保证不倒流，仅通过Q1会有少许放电（<0.5mA）。
3、若电池接反，则Q2将断开，确保没有反向电流。流经电阻R6的电流只有几微安可忽略。
4、若短路，则Q3截止，Q2因此而截至，无电流。
Q1为常用小功率NPN硅管。
Q2为N沟道场效应管，可选择额定电流稍大些的（比如20A），以便其压降可以忽略。
同样，若要改变充电电流，或者改变充电电压，分别变换R1和R4就可以（黑体）

如果电流不超过1A，则LM338可以用LM317替代。
如果输出是4.2V，则R4可取10k可调。

需要进一步了解原理，可以参考LM338的数据手册和TL431的数据手册（pdf文件），后面都有典型电路。

