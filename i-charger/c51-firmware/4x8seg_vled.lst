C51 COMPILER V8.01   4X8SEG_VLED                                                           10/07/2009 21:30:47 PAGE 1   


C51 COMPILER V8.01, COMPILATION OF MODULE 4X8SEG_VLED
OBJECT MODULE PLACED IN 4x8seg_vled.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE driver\4x8seg_vled.c BROWSE INCDIR(.\driver) DEBUG OBJECTEXTEND PRINT(.\4x8
                    -seg_vled.lst) OBJECT(4x8seg_vled.obj)

line level    source

   1          
   2          #include <config.h>
   3          
   4          #include <4x8seg_vled.h>
   5          
   6          unsigned char seg0_9[]={
   7                  0XC0,/*0*/
   8                  0XF9,/*1*/
   9                  0XA4,/*2*/
  10                  0XB0,/*3*/
  11                  0X99,/*4*/
  12                  0X92,/*5*/
  13                  0X82,/*6*/
  14                  0XF8,/*7*/
  15                  0X80,/*8*/
  16                  0X90,/*9*/
  17          
  18          #if 0
                      0X3F,/*0*/
                      0X06,/*1*/
                      0X5B,/*2*/
                      0X4F,/*3*/
                      0X66,/*4*/
                      0X6D,/*5*/
                      0X7D,/*6*/
                      0X07,/*7*/
                      0X7F,/*8*/
                      0X6F,/*9*/
              #endif
  30          };
  31          
  32          
  33          void segoff( unsigned char segbit)
  34          {
  35   1         if(segbit&0x1)
  36   1              segENA1=1;
  37   1         if(segbit&0x2)
  38   1              segENA2=1;
  39   1         if(segbit&0x4)
  40   1             segENA3=1;
  41   1         if(segbit&0x8)
  42   1             segENA4=1;
  43   1      /*
  44   1         switch bit {
  45   1           case 1:
  46   1              segENA1=1;
  47   1           case 2:
  48   1              segENA2=1;
  49   1           case 3:
  50   1              segENA3=1;
  51   1           case 4:
  52   1              segENA4=1;
  53   1           
  54   1         }
C51 COMPILER V8.01   4X8SEG_VLED                                                           10/07/2009 21:30:47 PAGE 2   

  55   1         */
  56   1      }
  57          
  58          void segon(unsigned char segbit)
  59          {
  60   1         if(segbit&0x1)
  61   1              segENA1=0;
  62   1         if(segbit&0x2)
  63   1              segENA2=0;
  64   1         if(segbit&0x4)
  65   1             segENA3=0;
  66   1         if(segbit&0x8)
  67   1             segENA4=0;
  68   1         
  69   1      }
  70          
  71          
  72          
  73          void segchar(unsigned char c, unsigned char segbit)
  74          {
  75   1         segoff(0xF);
  76   1         segData = c;      
  77   1         switch ( segbit ){
  78   2           case 0:
  79   2              segENA1=0;
  80   2                      break;
  81   2           case 1:
  82   2              segENA2=0;
  83   2                      break;
  84   2           case 2:
  85   2              segENA3=0;
  86   2                      break;
  87   2           case 3:
  88   2                  segENA4=0;
  89   2                      break;
  90   2               default:
  91   2                  ;
  92   2           
  93   2         }
  94   1      }
  95          void testseg()
  96          {
  97   1         unsigned char n;
  98   1         segon(0xF);
  99   1                
 100   1         for(n=0;n<=9;n++){
 101   2                 segData = seg0_9[n];
 102   2                mdelay(128);
 103   2         
 104   2         }
 105   1         
 106   1         for(n=0;n<=9;n++){
 107   2                 segData = seg0_9[n] & segDOT;
 108   2                mdelay(128);
 109   2         }
 110   1      
 111   1      }
 112          
 113          
 114          void testvled()
 115          {
 116   1        unsigned char n;
C51 COMPILER V8.01   4X8SEG_VLED                                                           10/07/2009 21:30:47 PAGE 3   

 117   1        vledon();
 118   1        
 119   1        segData = 0xff;
 120   1        segData = 0;
 121   1        mdelay(255);
 122   1        segData = 0xff;
 123   1        mdelay(255);
 124   1         
 125   1        for(n=0;n<=8;n++){
 126   2                segData = ~(1<<n);
 127   2                mdelay(128);
 128   2        }
 129   1      
 130   1        vledoff();
 131   1      }
 132          
 133          void vled_flowtick()
 134          {
 135   1        static char n=0; 
 136   1        vledon();
 137   1      
 138   1        segData = ~(1<<n);
 139   1      
 140   1        if(7==n)
 141   1            n=0;
 142   1        else
 143   1            n++;
 144   1      
 145   1        vledoff();
 146   1      }
 147          
 148          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    243    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     11       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
