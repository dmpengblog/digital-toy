C51 COMPILER V8.01   2X2KEYBD                                                              08/02/2009 14:38:53 PAGE 1   


C51 COMPILER V8.01, COMPILATION OF MODULE 2X2KEYBD
OBJECT MODULE PLACED IN 2x2keybd.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE 2x2keybd.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          
   2          
   3          //#include <REGX52.H>
   4          #include <AT89X52.H>
   5                             
   6          xdelay()
   7          {
   8   1        int a;
   9   1        for (a=0; a<5000; a++); 
  10   1      }
  11          
  12          ldelay()
  13          {
  14   1        int a;
  15   1        for (a=0; a<30000; a++); 
  16   1      }
  17          
  18          #define led1on      P2_0=0; xdelay();
  19          #define led2on      P2_1=0; xdelay();
  20          #define led3on      P2_2=0; xdelay();
  21          
  22          #define led1off          P2_0=1; xdelay();
  23          #define led2off          P2_1=1; xdelay();
  24          #define led3off          P2_2=1; xdelay();
  25          
  26          
  27          
  28          // h1,h2--> p1_0, p1_1
  29          void keyscan(void)
  30          
  31          {
  32   1      
  33   1        unsigned char n;
  34   1      /*
  35   1        电路
  36   1        p1_0     -- R ---     +          +
  37   1        p1_1     --R---       +          +
  38   1        p1_2 行1------------     +
  39   1        p1_3 行2-----------------
  40   1      */
  41   1        //扫描第一行
  42   1        P1=0xff; 
  43   1        xdelay();
  44   1           
  45   1        P1=0xfb; //拉低第一行 , 1011
  46   1        xdelay();
  47   1        n=P1;
  48   1        if(n!=0xfb){
  49   2              switch(n){
  50   3                   case(0xf9):
  51   3                                      led2on;break;
  52   3                   case(0xfa):
  53   3                                       led3on;break;
  54   3                               case 0xf8 :
  55   3                                       led2on;led3on;break;
C51 COMPILER V8.01   2X2KEYBD                                                              08/02/2009 14:38:53 PAGE 2   

  56   3                               default: led1on;ldelay(); ldelay();led1off; ldelay(); ldelay();break;
  57   3            }
  58   2        }
  59   1      
  60   1        led2off;
  61   1        led3off
  62   1      }
  63          
  64          
  65          
  66          
  67          void main(void)
  68          {
  69   1      
  70   1         while(1){
  71   2       
  72   2               led1on;
  73   2      
  74   2           keyscan();
  75   2      
  76   2      
  77   2           
  78   2         }
  79   1      
  80   1      }
  81          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    117    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
